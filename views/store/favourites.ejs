<%- include('../partials/head') %>
</head>

<body class="bg-gray-50 min-h-screen flex flex-col">

    <!-- Navbar -->
    <nav class="bg-white shadow-md">
        <div class="max-w-7xl mx-auto px-6 py-4 flex justify-between items-center">

            <h1 class="text-2xl font-bold text-indigo-600">
                Cozy Stay
            </h1>

            <div class="space-x-4">
                <a href="/" class="text-gray-700 hover:text-indigo-600 font-medium">Home</a>

                <a href="/viewallhomes"
                   class="text-gray-700 hover:text-indigo-600 font-medium">
                    All Homes
                </a>

                <a href="/host/addHome"
                   class="px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700">
                    Add Home
                </a>
            </div>
        </div>
    </nav>


    <!-- Page Heading -->
    <div class="text-center mt-8">
        <h2 class="text-3xl font-bold text-gray-800">
            Your Favourite Homes
        </h2>

        <div class="w-24 h-1 bg-indigo-600 mx-auto mt-2 rounded"></div>
    </div>


    <!-- Content -->
    <main class="flex-grow p-6">

       <% if (favouriteHomes && favouriteHomes.length > 0) { %>

            <div class="flex flex-wrap gap-6 justify-center mt-8">

                <% favouriteHomes.forEach(home => { %>>

                    <!-- Card -->
                    <div class="w-full sm:w-[300px] bg-white shadow-lg rounded-xl overflow-hidden hover:shadow-2xl transition">

                        <!-- Image -->
                        <img 
                            src="<%= home.imageURL %>" 
                            alt="<%= home.houseName %>" 
                            class="w-full h-48 object-cover"
                        >

                        <!-- Content -->
                        <div class="p-4">

                            <h3 class="text-lg font-semibold text-indigo-600 mb-1">
                                <%= home.houseName %>
                            </h3>

                            <p class="text-gray-600 text-sm">
                                üìç <%= home.city %>
                            </p>

                            <p class="text-gray-700 font-medium mt-1">
                                ‚Çπ <%= home.price %> / night
                            </p>

                            <p class="text-yellow-500 text-sm mb-4">
                                ‚≠ê <%= home.rating %>
                            </p>

                            <!-- Buttons -->
                            <div class="flex flex-col gap-2">

                                <a href="/allhomes/<%= home.id %>"
                                   class="text-center bg-indigo-100 text-indigo-600 py-2 rounded-lg hover:bg-indigo-200">
                                    View Details
                                </a>

                                <form action="/favourites/remove/<%= home.id %>" method="POST">
                                    <button
                                        class="w-full bg-pink-100 text-pink-600 py-2 rounded-lg hover:bg-pink-200">
                                        Remove from Favourite
                                    </button>
                                </form>

                            </div>

                        </div>

                    </div>

                <% }) %>

            </div>

        <% } else { %>

            <div class="text-center mt-16">
                <p class="text-gray-500 text-lg">
                    No favourite homes yet.
                </p>

                <a href="/viewallhomes"
                   class="mt-4 inline-block bg-indigo-600 text-white px-6 py-3 rounded-lg hover:bg-indigo-700">
                    Browse Homes
                </a>
            </div>

        <% } %>

    </main>


    <!-- Footer -->
    <footer class="bg-white text-center py-4 text-gray-500 shadow-inner">
        ¬© 2026 Cozy Stay. All rights reserved.
    </footer>

</body>
</html>
